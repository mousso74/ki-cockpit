<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KI-Cockpit V3.0</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="header-left">
            <h1>KI-Cockpit V3.0</h1>
            <a href="archiv.html" class="nav-link">ğŸ“ Archiv</a>
        </div>
        <div class="state-indicator">
            <span class="state-dot" data-state="0"></span>
            <span class="state-dot" data-state="1"></span>
            <span class="state-dot" data-state="2"></span>
            <span class="state-dot" data-state="3"></span>
            <span class="state-dot" data-state="4"></span>
            <span class="state-dot" data-state="5"></span>
        </div>
    </header>

    <main>
        <!-- State 0: Problem-Eingabe -->
        <section id="state-0" class="state-section active">
            <div class="card">
                <h2>Problem beschreiben</h2>
                <p class="description">Beschreibe dein Problem oder deine Aufgabe so detailliert wie mÃ¶glich.</p>

                <!-- Kategorie-Auswahl -->
                <div class="form-group">
                    <label>Kategorie</label>
                    <div class="category-selection">
                        <label class="category-option">
                            <input type="radio" name="category" value="geschÃ¤ftlich" required>
                            <span class="category-card">
                                <span class="category-icon">ğŸ’¼</span>
                                <span>GeschÃ¤ftlich</span>
                            </span>
                        </label>
                        <label class="category-option">
                            <input type="radio" name="category" value="privat" required>
                            <span class="category-card">
                                <span class="category-icon">ğŸ </span>
                                <span>Privat</span>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Projekt-Auswahl -->
                <div class="form-group">
                    <label for="projectSelect">Projekt</label>
                    <div class="project-selection">
                        <select id="projectSelect" disabled>
                            <option value="">-- Erst Kategorie wÃ¤hlen --</option>
                        </select>
                        <button type="button" id="newProjectBtn" class="btn btn-small" disabled onclick="showNewProjectInput()">+ Neu</button>
                    </div>
                    <div id="newProjectContainer" class="new-project-input hidden">
                        <input type="text" id="newProjectName" placeholder="Neuer Projektname...">
                        <button type="button" class="btn btn-small btn-primary" onclick="confirmNewProject()">OK</button>
                        <button type="button" class="btn btn-small" onclick="cancelNewProject()">Abbrechen</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="sessionTitle">Session-Titel</label>
                    <input type="text" id="sessionTitle" placeholder="z.B. Heizungsproblem, Fensterangebot..." required>
                </div>
                <textarea id="problem-input" placeholder="Beschreibe hier dein Problem..."></textarea>
            </div>
            <div class="card">
                <h2>Template auswÃ¤hlen</h2>
                <div class="template-options">
                    <label class="template-option selected">
                        <input type="radio" name="template" value="questions" checked>
                        <span class="template-card">
                            <strong>Fragen-Analyse</strong>
                            <small>KIs stellen klÃ¤rende Fragen</small>
                        </span>
                    </label>
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-primary" onclick="generatePrompts()">Prompts generieren â†’</button>
            </div>
        </section>

        <!-- State 1: Phase-1 Prompts -->
        <section id="state-1" class="state-section">
            <div class="card">
                <h2>Phase 1: Fragen-Prompts</h2>
                <p class="description">Kopiere den Prompt und fÃ¼ge ihn in die jeweilige KI ein.</p>
                <div class="prompt-display">
                    <pre id="phase1-prompt"></pre>
                </div>
            </div>
            <div class="copy-buttons">
                <button class="btn btn-chatgpt" onclick="copyPrompt('phase1', 'ChatGPT')">
                    <span class="btn-icon">ğŸ“‹</span> ChatGPT
                </button>
                <button class="btn btn-claude" onclick="copyPrompt('phase1', 'Claude')">
                    <span class="btn-icon">ğŸ“‹</span> Claude
                </button>
                <button class="btn btn-gemini" onclick="copyPrompt('phase1', 'Gemini')">
                    <span class="btn-icon">ğŸ“‹</span> Gemini
                </button>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" onclick="prevState()">â† ZurÃ¼ck</button>
                <button class="btn btn-primary" onclick="nextState()">Weiter â†’</button>
            </div>
        </section>

        <!-- State 2: Fragen-Outputs einfÃ¼gen -->
        <section id="state-2" class="state-section">
            <div class="card">
                <h2>KI-Antworten einfÃ¼gen</h2>
                <p class="description">FÃ¼ge die Fragen-Outputs der drei KIs hier ein.</p>
                <div class="ai-inputs">
                    <div class="ai-input-group chatgpt">
                        <label>ChatGPT Antwort</label>
                        <textarea id="chatgpt-questions" placeholder="ChatGPT Fragen hier einfÃ¼gen..."></textarea>
                    </div>
                    <div class="ai-input-group claude">
                        <label>Claude Antwort</label>
                        <textarea id="claude-questions" placeholder="Claude Fragen hier einfÃ¼gen..."></textarea>
                    </div>
                    <div class="ai-input-group gemini">
                        <label>Gemini Antwort</label>
                        <textarea id="gemini-questions" placeholder="Gemini Fragen hier einfÃ¼gen..."></textarea>
                    </div>
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" onclick="prevState()">â† ZurÃ¼ck</button>
                <button class="btn btn-primary" onclick="analyzeQuestions()">Fragen analysieren â†’</button>
            </div>
        </section>

        <!-- State 3: Deduplizierte Fragen + Antworten -->
        <section id="state-3" class="state-section">
            <div class="card">
                <h2>Fragen beantworten</h2>
                <p class="description">Beantworte die zusammengefassten Fragen der KIs.</p>
                <div id="questions-container">
                    <!-- Dynamisch generiert -->
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" onclick="prevState()">â† ZurÃ¼ck</button>
                <button class="btn btn-primary" onclick="generateSolvePrompts()">Solve-Prompts generieren â†’</button>
            </div>
        </section>

        <!-- State 4: Phase-2 Prompts (Solve) -->
        <section id="state-4" class="state-section">
            <div class="card">
                <h2>Phase 2: LÃ¶sungs-Prompts</h2>
                <p class="description">Kopiere den Prompt und fÃ¼ge ihn in die jeweilige KI ein.</p>
                <div class="prompt-display">
                    <pre id="phase2-prompt"></pre>
                </div>
            </div>
            <div class="copy-buttons">
                <button class="btn btn-chatgpt" onclick="copyPrompt('phase2', 'ChatGPT')">
                    <span class="btn-icon">ğŸ“‹</span> ChatGPT
                </button>
                <button class="btn btn-claude" onclick="copyPrompt('phase2', 'Claude')">
                    <span class="btn-icon">ğŸ“‹</span> Claude
                </button>
                <button class="btn btn-gemini" onclick="copyPrompt('phase2', 'Gemini')">
                    <span class="btn-icon">ğŸ“‹</span> Gemini
                </button>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" onclick="prevState()">â† ZurÃ¼ck</button>
                <button class="btn btn-primary" onclick="nextState()">Weiter â†’</button>
            </div>
        </section>

        <!-- State 5: LÃ¶sungen + Synthese -->
        <section id="state-5" class="state-section">
            <div class="card">
                <h2>LÃ¶sungen einfÃ¼gen</h2>
                <p class="description">FÃ¼ge die LÃ¶sungen der drei KIs hier ein.</p>
                <div class="ai-inputs">
                    <div class="ai-input-group chatgpt">
                        <label>ChatGPT LÃ¶sung</label>
                        <textarea id="chatgpt-solution" placeholder="ChatGPT LÃ¶sung hier einfÃ¼gen..."></textarea>
                    </div>
                    <div class="ai-input-group claude">
                        <label>Claude LÃ¶sung</label>
                        <textarea id="claude-solution" placeholder="Claude LÃ¶sung hier einfÃ¼gen..."></textarea>
                    </div>
                    <div class="ai-input-group gemini">
                        <label>Gemini LÃ¶sung</label>
                        <textarea id="gemini-solution" placeholder="Gemini LÃ¶sung hier einfÃ¼gen..."></textarea>
                    </div>
                </div>
            </div>
            <div class="card">
                <h2>Synthese</h2>
                <button class="btn btn-primary btn-large" onclick="startSynthesis()" id="synthesis-btn">
                    ğŸ”® Synthese starten
                </button>
                <div id="synthesis-result" class="synthesis-result hidden">
                    <h3>Synthesierte LÃ¶sung</h3>
                    <div id="synthesis-content"></div>
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" onclick="prevState()">â† ZurÃ¼ck</button>
                <button class="btn btn-primary" onclick="resetSession()">Neue Session</button>
            </div>
        </section>
    </main>

    <footer>
        <button class="btn btn-footer" onclick="saveCurrentSession()">ğŸ’¾ Session speichern</button>
        <button class="btn btn-footer" onclick="openArchive()">ğŸ“‚ Archiv laden</button>
    </footer>

    <!-- Archive Modal -->
    <div id="archive-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Gespeicherte Sessions</h2>
                <button class="modal-close" onclick="closeArchive()">Ã—</button>
            </div>
            <div class="modal-body" id="archive-list">
                <!-- Dynamisch generiert -->
            </div>
        </div>
    </div>

    <!-- Usage Stats -->
    <div id="usageStats" class="usage-stats"></div>

    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>

    <!-- Archive Modal (Simple) -->
    <div id="archiveModal" class="modal" style="display:none;"></div>

    <script src="js/prompts.js"></script>
    <script src="js/parser.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
